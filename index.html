<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mattia Astori</title>
  <link rel="stylesheet" href="assets/fonts.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: #ffffff;
      color: #000000;
      line-height: 1.4;
    }

    .container {
      display: flex;
      min-height: 100vh;
    }

    /* Left Sidebar - exact match */
    .sidebar {
      width: 240px;
      padding: 30px 40px;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      top: 20px;
      left: 15px;
      display: flex;
      flex-direction: column;
    }

    .logo {
      font-size: 25px;
      font-weight: normal;
      margin-bottom: 30px;
      color: #000;
      padding-left: 0;
      font-family: 'GT America Regular', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    .nav {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 40px;
    }

    .nav a {
      color: #000;
      text-decoration: none;
      font-size: 16px;
      cursor: pointer;
      transition: opacity 0.2s ease;
    }

    .nav a:hover,
    .nav a.active {
      opacity: 0.5;
    }

    .social-icons {
      display: flex;
      gap: 15px;
      margin-top: 10px;
    }

    .social-icons a {
      color: #000;
      text-decoration: none;
      font-size: 14px;
      transition: opacity 0.2s ease;
    }

    .social-icons a:hover {
      opacity: 0.5;
    }

    .social-icons svg {
      width: 16px;
      height: 16px;
    }

    .menu-label {
      color: #999;
      font-size: 12px;
      margin-top: 20px;
    }

    /* Social Links */
    .socials {
      margin-top: 20px;
    }

    .socials a {
      color: #000;
      text-decoration: none;
      font-size: 14px;
      display: block;
      margin-bottom: 10px;
      transition: opacity 0.2s ease;
    }

    .socials a:hover {
      opacity: 0.5;
    }

    /* Main Content */
    .main-content {
      margin-left: 240px;
      flex: 1;
      padding: 30px 40px;
      height: 100vh;
      overflow-y: auto;
    }

    /* Ensure special characters maintain thin weight */
    .main-content p,
    .main-content h1,
    .main-content h2,
    .main-content h3,
    .main-content span:not(.important) {
      font-feature-settings: "ss01" 1, "kern" 1;
      font-variant-numeric: tabular-nums;
      font-weight: 200;
      letter-spacing: -0.01em;
    }

    /* Gallery */
    .gallery-container {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      height: 100%;
      justify-content: center;
      margin: 0 auto;
      max-width: 1200px;
      min-height: calc(100vh - 60px);
      padding-top: 60px;
      padding-bottom: 60px;
      transition: justify-content 0.3s ease;
    }

    .gallery-container.showing-thumbnails {
      justify-content: flex-start;
    }

    .gallery {
      position: relative;
      text-align: center;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      align-items: center;
    }

    .slide {
      display: none;
      width: 100%;
      height: 100%;
      position: relative;
    }

    .slide.active {
      display: block;
    }

    .slide img {
      height: 80vh;
      min-height: 80vh;
      max-height: 80vh;
      width: auto;
      object-fit: contain;
      margin: 0 auto;
    }

    /* Navigation zones */
    .nav-zone {
      position: absolute;
      top: 0;
      height: 100%;
      width: 50%;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .nav-zone.left {
      left: 0;
      background: linear-gradient(to right, rgba(255, 255, 255, 0.2), transparent);
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="black"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>') 12 12, auto;
    }

    .nav-zone.right {
      right: 0;
      background: linear-gradient(to left, rgba(255, 255, 255, 0.2), transparent);
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="black"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>') 12 12, auto;
    }

    .nav-zone:hover {
      opacity: 1;
    }

    /* Remove the arrow indicators */
    .nav-zone::after {
      display: none;
    }

    .nav-zone.left::after,
    .nav-zone.right::after {
      display: none;
    }

    /* Navigation Controls - Below the image */
    .controls-container {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      justify-content: center;
      position: absolute;
      bottom: 16px;
      left: 0;
      right: 0;
      z-index: 2;
    }

    .control-btn {
      background: none;
      border: none;
      color: #000;
      cursor: pointer;
      font-size: 14px;
      text-decoration: underline;
      transition: opacity 0.2s ease;
      font-family: 'GT America Thin', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      padding: 0;
    }

    .control-btn:hover {
      opacity: 0.5;
    }

    .separator {
      color: #000;
      margin: 0 5px;
      font-family: 'GT America Thin', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    /* Pagination Dots */
    .pagination {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 40px;
      justify-content: center;
    }

    .page-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: #ddd;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .page-dot.active {
      background-color: #000;
    }

    .page-dot:hover {
      background-color: #666;
    }

    /* Thumbnails */
    .thumbnails-container {
      display: flex;
      justify-content: center;
      position: relative;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      flex-shrink: 0;
      z-index: 1;
    }

    .thumbnails-toggle {
      color: #000;
      cursor: pointer;
      font-size: 14px;
      text-decoration: underline;
      padding: 0;
      text-align: center;
      width: 100%;
      font-family: 'GT America Thin', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      position: absolute;
      top: 16px;
      left: 0;
      right: 0;
      background: none;
      border: none;
      outline: none;
      z-index: 3;
    }

    .thumbnails-toggle:hover {
      opacity: 0.5;
    }

    .thumbnails {
      display: none;
      position: relative;
      width: 100%;
      margin: 0 auto;
      padding-bottom: 40px;
    }

    .thumbnails.show {
      display: block;
    }

    .thumbnail {
      cursor: pointer;
      position: absolute;
      transition: transform 0.2s ease;
      margin-bottom: 20px;
    }

    .thumbnail:hover {
      transform: scale(1.02);
    }

    .thumbnail img {
      width: 100%;
      height: auto;
      display: block;
    }

    /* About Section */
    .about-section {
      display: none;
      max-width: 500px;
      line-height: 1.5;
      margin-top: 60px;
      font-family: 'GT America Thin', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    .about-section.active {
      display: block;
    }

    .about-section p {
      margin-bottom: 20px;
      font-size: 16px;
      color: #000;
    }

    /* Socials Section */
    .socials-section {
      display: none;
      max-width: 500px;
    }

    .socials-section.active {
      display: block;
    }

    .socials-section h2 {
      font-size: 16px;
      font-weight: normal;
      margin-bottom: 20px;
    }

    .socials-section a {
      display: block;
      color: #000;
      text-decoration: underline;
      font-size: 14px;
      margin-bottom: 10px;
      transition: opacity 0.2s ease;
    }

    .socials-section a:hover {
      opacity: 0.5;
    }

    /* Mobile Responsive */
    .mobile-menu {
      display: none;
    }

    .image-title {
      margin-top: auto;
      font-size: 14px;
      color: #000;
      opacity: 1;
      padding-bottom: 80px;
      font-family: 'GT America Regular', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.4;
      display: flex;
      flex-direction: column;
    }

    .image-year {
      font-size: 12px;
      color: #666;
      margin-bottom: 4px;
      font-family: 'GT America Thin', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    .image-title.hidden {
      opacity: 0;
    }

    /* New mobile header styles */
    .mobile-header {
      display: none;
    }

    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }

      .sidebar {
        display: none;
      }

      .main-content {
        margin-left: 0;
        padding: 20px;
      }

      /* Mobile header styles */
      .mobile-header {
        display: flex;
        flex-direction: column;
        padding: 20px;
        position: relative;
        background: #fff;
        z-index: 1000;
      }

      .mobile-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
      }

      .mobile-logo {
        font-size: 22px;
        font-weight: normal;
        color: #000;
        font-family: 'GT America Regular', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      }

      .mobile-socials {
        display: flex;
        gap: 15px;
        margin-top: 15px;
      }

      .mobile-socials a {
        color: #000;
      }

      .mobile-socials svg {
        fill: currentColor;
      }

      .mobile-about {
        font-size: 16px;
        color: #000;
        text-decoration: none;
        transition: opacity 0.2s ease;
      }

      .mobile-about:hover {
        opacity: 0.5;
      }

      .gallery-container {
        padding-top: 0;
      }

      .gallery-container.showing-thumbnails {
        padding-bottom: 0;
      }

      .gallery {
        display: none;
      }

      .controls-container {
        display: none;
      }

      .thumbnails-toggle {
        display: none;
      }

      .thumbnails {
        position: static;
        column-count: 1;
        column-gap: 20px;
        padding-bottom: 0;
      }

      .thumbnail {
        position: static;
        width: 100%;
        margin-bottom: 20px;
        break-inside: avoid;
      }

      .thumbnail:last-child {
        margin-bottom: 0;
      }

      .thumbnail:hover {
        transform: none;
      }
    }
  </style>
</head>

<body>
  <!-- Mobile Menu Button -->
  <button class="mobile-menu" onclick="toggleMobileMenu()">Menu</button>

  <div class="container">
    <!-- Mobile Header -->
    <div class="mobile-header">
      <div class="mobile-top">
        <div class="mobile-logo">Mattia Astori</div>
        <a href="/about" class="mobile-about">About</a>
      </div>
      <div class="mobile-socials">
        <a href="https://instagram.com/astori.teller" target="_blank" title="Instagram">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
          </svg>
        </a>
        <a href="https://linkedin.com/in/mattiaastori" target="_blank" title="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
          </svg>
        </a>
        <a href="mailto:mattiastori@gmail.com" title="Email">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
            <path d="M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"/>
          </svg>
        </a>
      </div>
    </div>

    <!-- Left Sidebar - Exact Match -->
    <aside class="sidebar" id="sidebar">
      <div class="logo">Mattia Astori</div>
      <nav class="nav">
        <a href="/about">About</a>
        <div class="social-icons">
          <a href="https://instagram.com/astori.teller" target="_blank" title="Instagram">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
            </svg>
          </a>
          <a href="https://linkedin.com/in/mattiaastori" target="_blank" title="LinkedIn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
            </svg>
          </a>
          <a href="mailto:mattiastori@gmail.com" title="Email">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"/>
            </svg>
          </a>
        </div>
      </nav>
      <div class="image-title" id="image-title"></div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Home Section (Gallery) -->
      <div class="gallery-container" id="home-section">
        <span class="thumbnails-toggle" onclick="toggleThumbnails()">show all photos</span>
        
        <div class="gallery">
          <!-- Macha Series -->
          <div class="slide active">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/macha-rope-guy.webp" alt="Macha Series - Rope Guy">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/macha-purple-rope-guy.webp" alt="Macha Series - Purple Rope Guy">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/macha-moving-punch.webp" alt="Macha Series - Moving Punch">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/macha-missing-eye.webp" alt="Macha Series - Missing Eye">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/macha-hat-lady.webp" alt="Macha Series - Hat Lady">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/macha-girl.webp" alt="Macha Series - Girl">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/macha-coca-punch.webp" alt="Macha Series - Coca Punch">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/macha-broken-nose.webp" alt="Macha Series - Broken Nose">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/macha-punch.webp" alt="Macha Series - Punch">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/macha-policia.webp" alt="Macha Series - Policia">
          </div>

          <!-- Tultepec Series -->
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-sinaloa.webp" alt="Tultepec Series - Sinaloa">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-sinaloa-rocket.webp" alt="Tultepec Series - Sinaloa Rocket">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-push.webp" alt="Tultepec Series - Push">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-phone.webp" alt="Tultepec Series - Phone">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-milky-way.webp" alt="Tultepec Series - Milky Way">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-hooligan.webp" alt="Tultepec Series - Hooligan">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-guy-back.webp" alt="Tultepec Series - Guy Back">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-fire.webp" alt="Tultepec Series - Fire">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-everyone-carrying.webp" alt="Tultepec Series - Everyone Carrying">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-chaos-vertical.webp" alt="Tultepec Series - Chaos Vertical">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-chaos-horizontal.webp" alt="Tultepec Series - Chaos Horizontal">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-bull.webp" alt="Tultepec Series - Bull">
          </div>

          <!-- Tultepec Day Series -->
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-day-kid-vertical.webp" alt="Tultepec Day Series - Kid Vertical">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-day-kid-horizontal.webp" alt="Tultepec Day Series - Kid Horizontal">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-day-kid-and-sister.webp" alt="Tultepec Day Series - Kid and Sister">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-day-chihuahua.webp" alt="Tultepec Day Series - Chihuahua">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-day-bench-guy.webp" alt="Tultepec Day Series - Bench Guy">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/tultepec-day-baby.webp" alt="Tultepec Day Series - Baby">
          </div>

          <!-- Australia Series -->
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/australia-kangaroo.webp" alt="Australia Series - Kangaroo">
          </div>
          <div class="slide">
            <div class="nav-zone left" onclick="changeSlide(-1)"></div>
            <div class="nav-zone right" onclick="changeSlide(1)"></div>
            <img src="assets/images/australia-chair.webp" alt="Australia Series - Chair">
          </div>
        </div>

        <!-- Navigation Controls - Below the image -->
        <div class="controls-container">
          <button class="control-btn" onclick="changeSlide(-1)">prev</button>
          <span class="separator">/</span>
          <button class="control-btn" onclick="changeSlide(1)">next</button>
        </div>

        <!-- Thumbnails -->
        <div class="thumbnails-container">
          <div class="thumbnails" id="thumbnails">
            <!-- Generated by JavaScript -->
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    let currentSlide = 0;
    let showingThumbnails = false;

    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;

    // Image data
    const imageData = [
      // Macha series
      { src: 'assets/images/macha-rope-guy.webp', title: 'Tinku de Macha, Bolivia', year: '2025' },
      { src: 'assets/images/macha-purple-rope-guy.webp', title: 'Tinku de Macha, Bolivia', year: '2025' },
      { src: 'assets/images/macha-moving-punch.webp', title: 'Tinku de Macha, Bolivia', year: '2025' },
      { src: 'assets/images/macha-missing-eye.webp', title: 'Tinku de Macha, Bolivia', year: '2025' },
      { src: 'assets/images/macha-hat-lady.webp', title: 'Tinku de Macha, Bolivia', year: '2025' },
      { src: 'assets/images/macha-girl.webp', title: 'Tinku de Macha, Bolivia', year: '2025' },
      { src: 'assets/images/macha-coca-punch.webp', title: 'Tinku de Macha, Bolivia', year: '2025' },
      { src: 'assets/images/macha-broken-nose.webp', title: 'Tinku de Macha, Bolivia', year: '2025' },
      { src: 'assets/images/macha-punch.webp', title: 'Tinku de Macha, Bolivia', year: '2025' },
      { src: 'assets/images/macha-policia.webp', title: 'Tinku de Macha, Bolivia', year: '2025' },
      
      // Tultepec series
      { src: 'assets/images/tultepec-sinaloa.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-sinaloa-rocket.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-push.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-phone.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-milky-way.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-hooligan.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-guy-back.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-fire.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-everyone-carrying.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-chaos-vertical.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-chaos-horizontal.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-bull.webp', title: 'Feria Internacional de la Pirotecnìa, Mexico', year: '2025' },
      
      // Tultepec Day series
      { src: 'assets/images/tultepec-day-kid-vertical.webp', title: 'Tultepec, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-day-kid-horizontal.webp', title: 'Tultepec, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-day-kid-and-sister.webp', title: 'Tultepec, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-day-chihuahua.webp', title: 'Tultepec, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-day-bench-guy.webp', title: 'Tultepec, Mexico', year: '2025' },
      { src: 'assets/images/tultepec-day-baby.webp', title: 'Tultepec, Mexico', year: '2025' },

      // Australia series
      { src: 'assets/images/australia-kangaroo.webp', title: 'Australia', year: '2024' },
      { src: 'assets/images/australia-chair.webp', title: 'Australia', year: '2024' }
    ];

    // Initialize the gallery
    function initGallery() {
      generateThumbnails();
      updateSlide();

      // On mobile, always show thumbnails
      if (window.innerWidth <= 768) {
        const container = document.querySelector('.gallery-container');
        container.classList.add('showing-thumbnails');
        const thumbnails = document.getElementById('thumbnails');
        thumbnails.classList.add('show');
      }
    }

    // Generate thumbnails
    function generateThumbnails() {
      const thumbnailsContainer = document.getElementById('thumbnails');
      thumbnailsContainer.innerHTML = '';

      imageData.forEach((image, index) => {
        const thumbnail = document.createElement('div');
        thumbnail.className = 'thumbnail';
        thumbnail.onclick = () => {
          if (window.innerWidth > 768) {
            goToSlide(index);
          }
        };

        const img = document.createElement('img');
        img.src = image.src;
        img.alt = image.title;
        
        // Add load event to trigger masonry layout
        img.onload = () => {
          if (window.innerWidth > 768) {
            layoutMasonry();
          }
        };

        thumbnail.appendChild(img);
        thumbnailsContainer.appendChild(thumbnail);
      });
    }

    // Masonry layout function
    function layoutMasonry() {
      if (window.innerWidth <= 768) {
        // Reset any masonry styles on mobile
        const container = document.getElementById('thumbnails');
        const thumbnails = container.querySelectorAll('.thumbnail');
        thumbnails.forEach(thumbnail => {
          thumbnail.style.width = '';
          thumbnail.style.left = '';
          thumbnail.style.top = '';
        });
        container.style.height = '';
        return;
      }
      
      const container = document.getElementById('thumbnails');
      const thumbnails = container.querySelectorAll('.thumbnail');
      
      if (thumbnails.length === 0) return;
      
      const containerWidth = container.offsetWidth;
      const columnCount = 3;
      const gap = 20;
      const columnWidth = (containerWidth - (gap * (columnCount - 1))) / columnCount;
      
      // Initialize column heights
      const columnHeights = new Array(columnCount).fill(0);
      
      thumbnails.forEach((thumbnail, index) => {
        const img = thumbnail.querySelector('img');
        if (!img.complete) return; // Skip if image not loaded
        
        // Calculate which column to place this thumbnail in
        // For left-to-right, top-to-bottom order, we use the shortest column
        const shortestColumnIndex = columnHeights.indexOf(Math.min(...columnHeights));
        
        // Set thumbnail size and position
        thumbnail.style.width = `${columnWidth}px`;
        thumbnail.style.left = `${shortestColumnIndex * (columnWidth + gap)}px`;
        thumbnail.style.top = `${columnHeights[shortestColumnIndex]}px`;
        
        // Calculate the aspect ratio and height
        const aspectRatio = img.naturalHeight / img.naturalWidth;
        const thumbnailHeight = columnWidth * aspectRatio;
        
        // Update column height
        columnHeights[shortestColumnIndex] += thumbnailHeight + gap;
      });
      
      // Set container height
      const maxHeight = Math.max(...columnHeights);
      container.style.height = `${maxHeight}px`;
    }

    // Change slide
    function changeSlide(direction) {
      currentSlide += direction;
      if (currentSlide >= totalSlides) currentSlide = 0;
      if (currentSlide < 0) currentSlide = totalSlides - 1;
      updateSlide();
    }

    // Go to specific slide
    function goToSlide(index) {
      currentSlide = index;
      updateSlide();

      // Close thumbnails when selecting
      if (showingThumbnails) {
        toggleThumbnails();
      }
    }

    // Update slide display
    function updateSlide() {
      slides.forEach((slide, index) => {
        slide.classList.toggle('active', index === currentSlide);
      });

      // Update thumbnails
      const thumbnails = document.querySelectorAll('.thumbnail');
      thumbnails.forEach((thumbnail, index) => {
        thumbnail.classList.toggle('active', index === currentSlide);
      });

      // Update image title
      const imageTitle = document.getElementById('image-title');
      imageTitle.innerHTML = `<div class="image-year">${imageData[currentSlide].year}</div>${imageData[currentSlide].title}`;
    }

    // Toggle thumbnails view - only for desktop
    function toggleThumbnails() {
      if (window.innerWidth <= 768) return;
      
      const thumbnailsContainer = document.getElementById('thumbnails');
      const toggleButton = document.querySelector('.thumbnails-toggle');
      const gallery = document.querySelector('.gallery');
      const controls = document.querySelector('.controls-container');
      const container = document.querySelector('.gallery-container');
      const imageTitle = document.getElementById('image-title');

      showingThumbnails = !showingThumbnails;
      thumbnailsContainer.classList.toggle('show', showingThumbnails);
      toggleButton.textContent = showingThumbnails ? 'hide all photos' : 'show all photos';
      container.classList.toggle('showing-thumbnails', showingThumbnails);
      imageTitle.classList.toggle('hidden', showingThumbnails);
      
      gallery.style.display = showingThumbnails ? 'none' : 'flex';
      controls.style.display = showingThumbnails ? 'none' : 'flex';
      
      // Trigger masonry layout when showing thumbnails
      if (showingThumbnails) {
        setTimeout(layoutMasonry, 50); // Small delay to ensure display change is applied
      }
    }

    // Toggle mobile menu
    function toggleMobileMenu() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('mobile-open');
    }

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (document.getElementById('home-section').style.display !== 'none') {
        if (e.key === 'ArrowLeft') changeSlide(-1);
        if (e.key === 'ArrowRight') changeSlide(1);
      }
    });

    // Touch/swipe support
    let touchStartX = 0;
    let touchEndX = 0;

    document.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    });

    document.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    });

    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = touchStartX - touchEndX;

      if (Math.abs(diff) > swipeThreshold && document.getElementById('home-section').style.display !== 'none') {
        if (diff > 0) {
          changeSlide(1);
        } else {
          changeSlide(-1);
        }
      }
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', initGallery);
  </script>
</body>

</html>